(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);const t=document.querySelector(".card-basket");function n(){const e=document.querySelector("[data-cart-empty]"),n=document.querySelector("#order-form");t.children.length>0?(e.classList.add("hidden"),n.classList.remove("hidden")):(e.classList.remove("hidden"),n.classList.add("hidden"))}function r(){const e=document.querySelectorAll(".card-basket__item"),t=document.querySelector(".basket__total-cost"),n=document.querySelector(".basket__delivery-free"),r=document.querySelector(".basket__delivery-box"),a=document.querySelector(".dolar");let c=0;e.forEach((e=>{const t=e.querySelector("[data-counter]"),n=e.querySelector(".card-basket__currency"),r=parseInt(t.innerText)*parseInt(n.innerText);c+=r})),t.innerText=c,c>=1e3?(a.classList.add("hidden"),n.innerText="free"):(a.classList.remove("hidden"),n.innerText="100",t.innerText=c+ +n.innerText),c>0?r.classList.remove("hidden"):(r.classList.add("hidden"),a.classList.add("hidden"),t.innerText="0")}window.addEventListener("click",(function(e){let a;if("minus"===e.target.dataset.action||"plus"===e.target.dataset.action){const t=e.target.closest(".content-card__counter"),n=e.target.closest(".card-basket__counter");a=t?t.querySelector("[data-counter]"):a=n.querySelector("[data-counter]")}if("plus"===e.target.dataset.action&&(a.innerText=++a.innerText),"minus"===e.target.dataset.action&&(parseInt(a.innerText)>1?a.innerText=--a.innerText:e.target.closest(".card-basket")&&1===parseInt(a.innerText)&&(e.target.closest(".card-basket__item").remove(),n(),r())),e.target.hasAttribute("data-action")&&e.target.closest(".card-basket")&&r(),e.target.hasAttribute("data-cart-btn")){const a=e.target.closest(".card"),c={id:a.dataset.id,img:a.querySelector(".card__img").getAttribute("src"),alt:a.querySelector(".card__img").getAttribute("alt"),title:a.querySelector(".card__title").innerText,itemsInBox:a.querySelector("[data-items-in-box]").innerText,counter:a.querySelector("[data-counter]").innerText,weight:a.querySelector(".price-content__weight").innerText,price:a.querySelector(".price-content__currency").innerText},i=t.querySelector(`[data-id ="${c.id}"]`);if(i){const e=i.querySelector("[data-counter]");e.innerText=parseInt(e.innerText)+parseInt(c.counter)}else{const e=`\n         <div class="card-basket__item" data-id="${c.id}">\n            <div class="card-basket__top">\n               <div class="card-basket__img">\n                   <img src="${c.img}" alt="${c.alt}">\n               </div>\n               <div class="card-basket__desc">\n\n                  <div class="card-basket__title">${c.title}</div>\n                  <div class="card-basket__weight">${c.itemsInBox} / ${c.weight}</div>\n         \n                  <div class="card-basket__content">\n         \n                     <div class="card-basket__counter">\n                        <div class="card-basket__control" data-action="minus">-</div>\n                        <div class="card-basket__current" data-counter="">${c.counter}</div>\n                        <div class="card-basket__control" data-action="plus">+</div>\n                     </div>\n                     \n                     <div class="card-basket__price">\n                        <div class="card-basket__currency">${c.price}</div>\n                     </div>\n                     \n                  </div>\n                     \n               </div>\n            </div>\n                     </div>`;t.insertAdjacentHTML("afterbegin",e)}a.querySelector("[data-counter]").innerText="1",n(),r()}})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)}))})();